# 33. Расширения процессора. SSE. Классификация команд.

---



SSE(Streaming SIMD Extensions - потоковые SIMD-расширения), где SIMD (Single Instruction - Multiple Data) - общий для SSE и ММХ подход к обработке большого количества данных одной командой.



- Команды (больше, чем в MMX):

  - Пересылки

    - Начинаются с MOV…
    - Возможные пересылки:
      1. Выравненные упакованные числа
      2. Невыравненные упакованные числа
      3. Старшие упакованные числа
      4. Младшие упакованные числа
      5. Старшие упакованные числа в младшие
      6. Младшие упакованные числа в старшие
      7. Маску в переменную
      8. Одно вещественное число

    По сути различаются количеством копируемых бит, местом копирования (выше), возможными значениями приемника/источника (регистр SSE, переменная в памяти)

  - Сравнения

    - CMPPS - Сравнение упакованных вещественных чисел. CMPSS - Сравнение одной пары упакованных чисел
    - COMISS- Сравнение одной пары чисел с установкой флагов.UCOMISS -

  - Арифметические

    - ADDPS - Сложение упакованных вещественных чисел (Выполняет параллельное сложение четырех пар чисел с плавающей запятой, находящихся в источнике (переменная или регистр SSE) и приемнике (регистр SSE). Результат записывается в приемник) ADDSS - Сложение одного вещественного числ (Выполняет сложение нулевых (занимающих биты 31-0) чисел с плавающей запятой в источнике (переменная или регистр SSE) и приемнике (регистр SSE). Результат записывается в биты 31-0 приемника, биты 127-32 остаются без изменений.)
    - Аналогично SUBSS, SUBPS, MULPS, MULSS, DIVPS, DIVSS, SQRTPS, SQRTSS
    - RCPPS - Обратная величина для упакованных чисел. RCPSS - Обратная величина для одного числа
    - RSQRTPS - Обратный корень из упакованных чисел. RSQRTSS - Обратный корень из одного числа
    - MAXPS, MAXSS, MINPS, MINSS

  - Преобразования типов

    - CVTPI2PS - Упакованные целые в вещественные
    - CVTPS2PI - Упакованные вещественные в целые
    - CVTSI2SS- Целое в вещественное
    - CVTSS2SI - Вещественное в целое
    - CVTTPS2PI - Вещественных в целые с обрезанием
    - CVTTSS2SI - Преобразование вещественного в целое с обрезанием

  - Логические

    - ANDPS - И
    - ANDNPS - НЕ-И
    - ORPS - ИЛИ
    - XORPS - Исключающее ИЛИ

  - Целочисленные

    Помимо расширения для работы с упакованными вещественными числами в SSE входит расширение набора команд для работы с упакованными целыми числами, которые размещаются в регистрах ММХ.

    - PEXTRW - Распаковать одно слово
    - PINSRW - Запаковать одно слово

    и т.д.

  - Упаковки

    - SHUFPS - Переставить упакованные вещественные
    - UNPCKHPS - Распаковать старшие вещественные числа
    - UNPCKLPS - Распаковать младшие вещественные числа

  - Управления состоянием

    - LDMXCSR - Загрузить регистр MXCSR (Помещает значение источника (32-битная переменная) в регистр управления и состояния SSE MXCSR)
    - STMXCSR - Сохранить регистр MXCSR (Помещает значение регистра MXCSR в приемник (32-битная переменная).
    - FXSAVE - Сохранить состояние FPU, MMX, SSE (Сохраняет содержимое всех регистров FPU, ММХ и SSE в приемнике (512- байтовая область памяти).
    - FXRSTOR - Восстановить состояние FPU, MMX, SSE

  - Управления кэшированием

    - MASKMOVQ - Запись байтов минуя кэш
    - MOVNTQ - Запись 64 бит минуя кэш (Содержимое источника (регистр ММХ) записывается в приемник (64-битная переменная в памяти), сводя к минимуму загрязнение кэша)
    - MOVNTPS - Запись 128 бит минуя кэш
    - SFENCE - Защита записи

    ![image-20230614194315498](C:\Users\nikitalystsev\AppData\Roaming\Typora\typora-user-images\image-20230614194315498.png)